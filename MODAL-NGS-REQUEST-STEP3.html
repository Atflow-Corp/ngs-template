<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메디컬 컨디션 - CANCERT</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="main.css" rel="stylesheet">

  
<body>
    <!-- 모달 열기 버튼 -->
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#ngsRequestModal3">
        모달 열기
    </button>

    <!-- Step 3 모달 -->
    <div class="modal fade" id="ngsRequestModal3" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="width: 640px; border-radius: 12px; padding: 24px; box-shadow: 0px 20px 24px -4px rgba(16, 24, 40, 0.08), 0px 8px 8px -4px rgba(16, 24, 40, 0.03);">
                <div class="modal-body d-flex flex-column align-items-start gap-4">
                 <!-- 상단 스텝 이미지 -->
                 <div class="align-self-start">
                    <img src="img/step3.png" alt="Step 3" style="width: 60%; height: auto;">
                </div>
                   <h3 style="color: #101828; font-size: 18px; font-weight: 800; line-height: 28px;">첨부 서류 및 동의서</h3>
                    <p style="color: #344054; font-size: 14px; font-weight: 400;">마지막으로 필요한 서류와 동의서를 제출하시면 검사 의뢰가 완료됩니다.</p>

                  <!-- 파일 첨부 섹션 -->
<!-- 파일 첨부 섹션 -->
<!-- 파일 첨부 섹션 -->
<div class="mb-3">
    <label class="form-label" style="color: #344054; font-size: 14px;">가족 건강 가계도 (선택. 최대 5MB)<br>가계도는 가족 간 유전적 연결을 파악하는 데 도움을 줍니다. PDF, JPG 파일만 첨부 가능합니다.</label>
    <button type="button" class="modal-fileupload btn btn-light" id="fileUploadButton1" onclick="document.getElementById('fileInput1').click();">
        <img src="img/upload.png" alt="Upload" style="margin-right: 5px; width: 20px; height: 20px;">파일첨부
    </button>
    <input type="file" class="form-control" id="fileInput1" style="display: none;" onchange="updateFileName('fileInput1', 'fileName1', 'resetButton1')" required>

    <div class="file-name-container" style="display: flex; align-items: flex-start; flex-wrap: wrap; margin-top: 8px;">
        <div class="file-name" id="fileName1" style="display: none; align-items: left; border: 1px solid #D0D5DD; padding: 5px 14px 5px 14px; overflow: hidden; flex-wrap: wrap;">
            <span id="fileNameText1" style="overflow: hidden; white-space: normal; text-overflow: ellipsis; text-align: left;"></span>
            <button type="button" class="delete-file-btn" id="deleteButton1" style="display: none; background: none; border: none; cursor: pointer; margin-left: 8px;">
                <img src="img/x.png" alt="Delete" style="width: 20px; height: 20px;">
            </button>
        </div>
        <button type="button" class="file-reset-btn" id="resetButton1" style="display: none; margin-left: 8px; white-space: nowrap; align-self: flex-start;" onclick="resetFile('fileInput1', 'fileName1', 'resetButton1')">다시 선택</button>
    </div>
</div>

<div class="mb-3">
    <label class="form-label" style="color: #344054; font-size: 14px;">의무 기록지 사본 (필수. 최대 5MB)</label>
    <button type="button" class="modal-fileupload btn btn-light" id="fileUploadButton2" onclick="document.getElementById('fileInput2').click();">
        <img src="img/upload.png" alt="Upload" style="margin-right: 5px; width: 20px; height: 20px;">파일첨부
    </button>
    <input type="file" class="form-control" id="fileInput2" style="display: none;" onchange="updateFileName('fileInput2', 'fileName2', 'resetButton2')" required>

    <div class="file-name-container" style="display: flex; align-items: flex-start; flex-wrap: wrap; margin-top: 8px;">
        <div class="file-name" id="fileName2" style="display: none; align-items: left; border: 1px solid #D0D5DD; padding: 5px 14px 5px 14px; overflow: hidden; flex-wrap: wrap;">
            <span id="fileNameText2" style="overflow: hidden; white-space: normal; text-overflow: ellipsis; text-align: left;"></span>
            <button type="button" class="delete-file-btn" id="deleteButton2" style="display: none; background: none; border: none; cursor: pointer; margin-left: 8px;">
                <img src="img/x.png" alt="Delete" style="width: 20px; height: 20px;">
            </button>
        </div>
        <button type="button" class="file-reset-btn" id="resetButton2" style="display: none; margin-left: 8px; white-space: nowrap; align-self: flex-start;" onclick="resetFile('fileInput2', 'fileName2', 'resetButton2')">다시 선택</button>
    </div>
</div>


<div class="mb-3">
    <label class="form-label" style="color: #344054; font-size: 14px;">유전자검사 동의서 (필수. 최대 5MB)</label>
    <button type="button" class="modal-fileupload btn btn-light" id="fileUploadButton3" onclick="document.getElementById('fileInput3').click();">
        <img src="img/upload.png" alt="Upload" style="margin-right: 5px; width: 20px; height: 20px;">파일첨부
    </button>
    <input type="file" class="form-control" id="fileInput3" style="display: none;" onchange="updateFileName('fileInput3', 'fileName3', 'resetButton3')" required>
    <div class="file-name-container" style="display: flex; align-items: flex-start; flex-wrap: wrap; margin-top: 8px;">
        <div class="file-name" id="fileName3" style="display: none; align-items: left; border: 1px solid #D0D5DD; padding: 5px 14px 5px 14px; overflow: hidden; flex-wrap: wrap;">
            <span id="fileNameText3" style="overflow: hidden; white-space: normal; text-overflow: ellipsis; text-align: left;"></span>
            <button type="button" class="delete-file-btn" id="deleteButton3" style="display: none; background: none; border: none; cursor: pointer; margin-left: 8px;">
                <img src="img/x.png" alt="Delete" style="width: 20px; height: 20px;">
            </button>
        </div>
            <button type="button" class="file-reset-btn" id="resetButton3" style="display: none; margin-left: 8px; white-space: nowrap;" onclick="resetFile('fileInput3', 'fileName3', 'resetButton3')">다시 선택</button>
        
    </div>
</div>

<div class="mb-3">
    <label class="form-label" style="color: #344054; font-size: 14px;">인체 유래물 기증 동의서 (필수. 최대 5MB)</label>
    <button type="button" class="modal-fileupload btn btn-light" id="fileUploadButton4" onclick="document.getElementById('fileInput4').click();">
        <img src="img/upload.png" alt="Upload" style="margin-right: 5px; width: 20px; height: 20px;">파일첨부
    </button>
    <input type="file" class="form-control" id="fileInput4" style="display: none;" onchange="updateFileName('fileInput4', 'fileName4', 'resetButton4')" required>
    <div class="file-name-container" style="display: flex; align-items: flex-start; flex-wrap: wrap; margin-top: 8px;">
        <div class="file-name" id="fileName4" style="display: none; align-items: left; border: 1px solid #D0D5DD; padding: 5px 14px 5px 14px; overflow: hidden; flex-wrap: wrap;">
            <span id="fileNameText4" style="overflow: hidden; white-space: normal; text-overflow: ellipsis; text-align: left;"></span>
            <button type="button" class="delete-file-btn" id="deleteButton4" style="display: none; background: none; border: none; cursor: pointer; margin-left: 8px;">
                <img src="img/x.png" alt="Delete" style="width: 20px; height: 20px;">
            </button>
        </div>
            <button type="button" class="file-reset-btn" id="resetButton4" style="display: none; margin-left: 8px; white-space: nowrap;" onclick="resetFile('fileInput4', 'fileName4', 'resetButton4')">다시 선택</button>
        
    </div>
</div>

<div class="form-check mt-3">
    <input class="form-check-input consent-checkbox" type="checkbox" value="" id="consentConfirmed">
    <label class="form-check-label" for="consentConfirmed" style="color: #344054; font-size: 14px;">
        적법한 동의를 받은 개인정보를 입력하였습니다.
    </label>
</div>

                    <!-- 버튼 영역 -->
                    <div class="d-flex gap-3 w-100">
                        <button type="button" class="btn btn-custom-white flex-grow-1" style="background: white; border: 1px solid #D0D5DD; color: #344054; height:44px;" data-bs-dismiss="modal">닫기</button>
                        <button type="button" class="btn btn-custom-purple flex-grow-1">제출</button>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function updateFileName(inputId, displayId, resetButtonId) {
            var input = document.getElementById(inputId);
            var display = document.getElementById(displayId);
            var resetButton = document.getElementById(resetButtonId);
            var fileNameText = document.getElementById('fileNameText' + inputId.charAt(inputId.length - 1)); // Get the corresponding file name text
            var uploadButton = document.getElementById('fileUploadButton' + inputId.charAt(inputId.length - 1)); // Get the corresponding upload button
            var deleteButton = document.getElementById('deleteButton' + inputId.charAt(inputId.length - 1)); // Get the corresponding delete button

            if (input.files.length > 0) {
                fileNameText.textContent = input.files[0].name;
                display.style.display = 'flex'; // Show file name display
                display.style.border = '1px solid var(--Gray-300, #D0D5DD)'; // Add border when a file is uploaded
                uploadButton.style.display = 'none'; // Hide upload button
                resetButton.style.display = 'block'; // Show reset button
                deleteButton.style.display = 'block'; // Show delete button
            } else {
                display.style.display = 'none'; // Hide file name display
                display.style.border = '1px solid transparent'; // Remove border
                uploadButton.style.display = 'block'; // Show upload button
                resetButton.style.display = 'none'; // Hide reset button
                deleteButton.style.display = 'none'; // Hide delete button
            }
        }

        function resetFile(inputId, displayId, resetButtonId) {
            var input = document.getElementById(inputId);
            var display = document.getElementById(displayId);
            var resetButton = document.getElementById(resetButtonId);
            var fileNameText = document.getElementById('fileNameText' + inputId.charAt(inputId.length - 1)); // Get the corresponding file name text
            var uploadButton = document.getElementById('fileUploadButton' + inputId.charAt(inputId.length - 1)); // Get the corresponding upload button
            var deleteButton = document.getElementById('deleteButton' + inputId.charAt(inputId.length - 1)); // Get the corresponding delete button

            input.value = ""; // Reset file input
            fileNameText.textContent = ""; // Clear file name text
            display.style.display = 'none'; // Hide file name display
            display.style.border = '1px solid transparent'; // Remove border
            uploadButton.style.display = 'block'; // Show upload button
            resetButton.style.display = 'none'; // Hide reset button
            deleteButton.style.display = 'none'; // Hide delete button
        }
    </script>
</body>
</html>
